struct Signal {
  data : *mut f32,
  length: s32,
}

trait Instrument {
  fn initialize(*mut self) -> bool;
  fn handle_midi_event(*mut self, status: s32, note: s32, velocity: s32, sample_rate: f32);
  fn mix_voices(*mut self, out: *mut f32, n: s32, sample_rate: u32);
  fn apply_envelope(*mut self, sample_rate: u32);
  fn get_active_voices(*mut self) -> mut [Voice];
}